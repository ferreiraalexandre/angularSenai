<!DOCTYPE html>
<html ng-app="tarefas">
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap-theme.min.css">
	<link rel="stylesheet" type="text/css" href="node_modules/angularjs-toaster/toaster.min.css">
	
	<title>Tarefas</title>
</head>
<body>
	<div ng-controller="TarefaController as controller">
		<form class="form-horizontal" name="myForm" ng-submit="submitForm()" novalidate>
			<div class="col-sm-6 col-sm-offset-3">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h2>Tarefa</h2>
					</div>
					<div class="panel-body">
						<json data="controller.tarefa"></json>
						<div class="form-group" ng-class="{ 'has-error' : myForm.resumo.$invalid && !myForm.resumo.$pristine }">
							<label class="control-label col-sm-3" for="resumo">Resumo</label>
							<div class="col-sm-9">
								<input id="resumo" name="resumo" class="form-control"  ng-model="controller.tarefa.resumo" required />
								<p ng-show="myForm.resumo.$invalid && !myForm.resumo.$pristine" class="help-block">Resumo é obrigatório</p>
  						</div>
					</div>

						<div class="form-group">
							<label class="control-label col-sm-3" for="descricao">Descrição</label>
							<div class="col-sm-9">
								<textarea id="descricao" name="descricao" class="form-control" ng-model="controller.tarefa.descricao" rows="6"></textarea>
							</div>
						</div>
						<div class="form-group" ng-class="{ 'has-error' : myForm.prazo.$invalid && !myForm.prazo.$pristine }">
							<label class="control-label col-sm-3" for="prazo">Prazo</label>
							<div class="col-sm-9">
								<input type="text" id="prazo" name="prazo" class="form-control" date-format ng-model="controller.tarefa.prazo" required ng-pattern="/^\d{2}\/\d{2}\/\d{4}$/"/>
								<div ng-messages="myForm.prazo.$error" class="help-block" ng-if="myForm.prazo.$dirty && myForm.prazo.$invalid">
									<p ng-message="required">Campo Obrigatorio</p>
									<p ng-message="pattern">formato 00/00/0000</p>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="control-label col-sm-3" for="situacao">Situação</label>
							<div class="col-sm-9">
								<select id="situacao" name="situacao" class="form-control" ng-model="controller.tarefa.situacao">
									<option value="">Selecione...</option>
									<option value="Pendente">Pendente</option>
									<option value="Concluído">Concluído</option>
								</select>
							</div>
						</div>
	
					<div class="panel-footer text-right">
					 	<button type="submit" class="btn btn-primary" ng-disabled="myForm.$invalid" ng-click="controller.salvarTarefa(controller.tarefa)">Salvar</button>
					 	<button type="button" class="btn btn-default" ng-click="controller.novaTarefa()">Cancelar</button>
					</div>
				</div>
			</div>
		</form>
		
		<div class="col-sm-4 col-sm-offset-8">
			<div class="input-group">
				<input class="form-control" ng-model="controller.pesquisa">
				<div class="input-group-btn">
					<button type="button" class="btn btn-default" ng-click="controller.int(tarefa)">Pesquisar</button>
					<button type="button" class="btn btn-primary">Novo</button>
				</div>
			</div>
		</div>
		<div class="table-responsive col-sm-12">
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Resumo</th>
						<th>Descrição</th>
						<th>Prazo</th>
						<th>Situação</th>
						<th>Opções</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="tarefa in controller.tarefas | filter:controller.pesquisa">
						<td>{{tarefa.resumo | uppercase}}</td>
						<td>{{tarefa.descricao | capitalize}}</td>
						<td>{{tarefa.prazo | date:'dd/MM/yyyy'}}</td>
						<td>{{tarefa.situacao}}</td>
						<td>
							<button type="button" class="btn btn-warning" ng-click="controller.selecionarTarefa(tarefa)">Editar</button>
							<button type="button" class="btn btn-danger" ng-click="controller.removerTarefa(tarefa)">Remover</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<toaster-container toaster-options="{'time-out':5000}"></toaster-container>
	
	<script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="node_modules/angular/angular.min.js"></script>
	<script type="text/javascript" src="node_modules/angular-resource/angular-resource.min.js"></script>
	<script type="text/javascript" src="node_modules/angular-messages/angular-messages.min.js"></script>
	<script type="text/javascript" src="node_modules/angularjs-toaster/toaster.min.js"></script>
	<script type="text/javascript" src="node_modules/angular-animate/angular-animate.min.js"></script>
	
	
	<!-- modulos -->
	<script type="text/javascript" src="js/config/app.js"></script>
	<script type="text/javascript" src="js/factory/tarefa.factory.js"></script>
	
	<!-- filters -->
	<script type="text/javascript" src="js/filter/capitalize-filter.js"></script>
	
	<!-- directives -->
	<script type="text/javascript" src="js/directive/date-format.directive.js"></script>
	<script type="text/javascript" src="js/directive/json.directive.js"></script>
	
	<!-- controllers -->
	<script type="text/javascript" src="js/tarefa/tarefa-controller.js"></script>
	
</body>
</html>